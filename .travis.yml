language: clojure
dist: bionic
env:
  global:
    - secure: dYQXYqrRFXFwKL79dssrtnBWyRtZqa6n86z9THAzl27ISZx9EL3ZjwwMIzNac0zrDWsaz3qs0EucshZGgvMQotvlQH5VwlRAKYff2L+4HnlY7cbH7zWwLgXWOa+ZtdlAef+/4Oi5xMkKpjzPydsUdQZf3wongJqTT8VTu0LG/bD/LWcsm7P5/2eRr/3vzVMF9keT4qhbBnNnCswY/UgTn/X2O+LmH/2hT0GZCy03hi/sz1lRb6+Vbvxm3ugG1CDJ4rrLHL4l+O6FkoaAR2sTRzJqWiKDShjzTuEgQDXn/n1dF+kwgurl99fzd9uPsmhQ1KjcvVtee9v3mEbyfWimi+6lncIy5XbYX/G8B5vwHLye8ijBF8OAXdeWZ+6lZAM41prsw2qM7qSWTg/J3V4X3N2L1521zsxFRC8II9xg+Zou0y9zHt1XKkXfXuZBoa/O0rGdxc1yfgbmrtw3gADeVT3uJe1iu3iv9hxrhp7XfbLCBfCKd2b40F9er/QRfo6LPfoNl28fBI9T003eQ1K7gj1b5vPi1V+447jVIA6yMaBBld9+/RIFUjtbyeTv5H5MIU2IuFED46h+oVLVwj2nE/IOYTVAUqlwQuBg3dRVm79ClwhzLN6YoBILQ4o2/aBNrIrs+hQb7PwyvWpO8kFvT5AuShbafDMMo4fVN/KdYmI=
    - secure: WVyxEonUYuYctSFYTjhGswrOp8WmBo9bO6Vs6e8N+qciut3nw+DNwc6pjQPP593NOPHZCFh6w2NW6oYYpcz1nnXN4TmkK9xebDFFCkf9h+zwkeYIK3hgDXLDYXic2jPydPB/mWaX8GaJOiTPFJUDEhnaHqojma1aw+ugLhzUkQZvEcdmauhaFejHQ2/NHMTEIbYRa0sgVTMo1JjKmXpQX6dOrwWEHIC4tGZrbaSvNz46ORyiXfc1BWG/k66p1rwvt0E1TfxaTbKzX+5i0hUnC1l0GOl4R8zD8wsySH8rd7HS1RDe0/04x9vPP5ZNHtr12vkoXAU33DbPEnK/ERlr2m3UYYcqq3VNFUEzccJKHE7+Ib8Emq2Ajsw+ItA166MGhaqcUOW+YrslAJjEPhkysoTQkVRrCh5fgEFY5JlK2+y4BNaE2okOrguJVG3Jj0fBump0YoKqHA0K8lRy7Y1zAdCj5JTwz0+nqE0TKFBMklvNR1xpuyDcltDeDwFEwB6b5IAo7Uj4DfHUBd7SE2Bc2qw42j/Jh2Sa3VyNYFIl2393eDdDOLRwR2LEAUEj1i8/6P8enAdeTplUc6cuGwlePswOgF6Axr9K/fQXUhhZEcoRe07hFtRe9dB6TiXrFWnUGWiWn8CTKHspcw343X9X9fLT6IE0xSwc1mVCr6JM8hM=
    - secure: Cm40HpqULbc93kXyXrrogSI/4HqfKIIKvHr1WZRl6IEp2ETY5PkU7go9sReB4QunBT1H9z8i59zf+GT5AyR9XeThV084tRU1CKJsZd6KUpgScb9N2tvPu0YdpT+nQCxunKUesNa3rp77lpZk0PtkJ9LKioN8dzQzUqkckr+ZiV8ibp/MVD9q+bjJzEKwrkKNXrrGzmiGsOFNBoIpezdpB+VcjJnPB3q4MpgjTvmCeOBJxDJlJ81yYx7cDNkAhjhkg+0bCQZK9/u6sQDHI93taWS3mnDlwU9kXklCenJzFYMSxnP4EPOktEEBEjn2XHVeMLex4+DRUDw2jumAqzzzJcBrzVz1fPyZaBQxSlYVGyjIsKUfT17EUjyfTJU6SQdq4bZjwdVPvFG+PnPhppk5qRil5jkEuoUu/5ZkwrkUyHr6do6/+aGtirU9xuUY0VBtAMLRZoYy5fTsrCDI1waZvHQ4/voHK+GIqD2zv6YIS2CrV4oaFHOGUonGOUQeQ4flS1XzdqtNIpKJ6BfvXiF0MJ5282f4yBsyNAlnesARNTJnOqui/hMLq2O4k7v2DxnZ51gff/Bq4nu6YqoX00tilDMBke33pD87cPeJ7i85KNTtDeqdUUdea/L+YhZsIZ+BytXny+qtGOmy3o7C3WVc1BBsqF5V5k1x1tdCXTOASNY=
    - secure: lKB8IcVnL6iFPYZI+Gy8r98Nq3pXLKEBSqiwFyHRlyZCGX8j6m4aXZbPKPv2i1EaTQjkDQSI4vof5k+yZ86UXrZ9tQ5zsQyVK9LEgCrKp8B+luF3GU7PsrpF93D5VgRQxSx1W4z7e3OQA5oKe7bexeAlsPVhumer5KlTH6vXUKVBEa2inQBk8zv8WyDKpbR/70C8i5xCLHpwf0naflPKYBl3STg/RSdgPdd2SgzK9KgPlw7a16sJJLCVzIC388DNhL8WBM/LNK0la7zs57yyXe/IFauEtdfM/e8lT8Jy5zJjjqXtlZoROuDUKOx5/B7FDrFUo1493LfwUppVVciKEn+9RxV/AosMmlRQVGaXHx3NPxZMfgl+drXOACzKT+WY8PrNd5EB3HXCH0Xgbcdwz55kDrecEWsPuaeHVBxTrewnOEGFFr86XWPgm4TgnSyLp9PGr+HLZzCe3KXt4bQcz6Tak9NjfUBohhG9UFtwu/VeDBsrfHKyJlU4oL5vAHCbmTQ38DuDVs/EsMCP6Uy7N+XixrrkXhxz+GGbMM8x1HFCR4hRvBwThEZ7LTtBtNRHmMZTxlWoUvdnnCi3+L5OOpQYmGHAYXcEj7gc+KAdAilo83vEklHs4GRDnAnvgUiwJTMUO5V8o3ayITVrRYEKsjWcwhE/E7BuZvDPA8OC624=
    - secure: lzmiHS4CM8w1DB6KXfqcWvBpXHVKAECQYLcjKkOhcbR0c9LregJr7aLiReBX5A5qhWgP21o4xnXVrKyEoJ17Tyu1UXXM4hojj3bY4PIWqPgDJ8WAnMj1q/kz7un2HsZuHBkr8Y3tM+gDadnNxMZGqoIM+1Z+qh0vih2v3FldzHbqN269o/fsxfnfrFilTMvo/c47jVZgp/CFoC3WaonFSghnIQEmmObb4QF4aWGV+UHzuy1Z2bqIf8T7z5Eht3D/uvqK/bWxIqNfkqCeFTDJEf9duuac05F95io7fsOxb3Wf+EhcwcK7LnXUkZc3v626W+Hh8YYYdUWBIzDa9UHJYORUL6TAuktGgN/lKaYh/mLM5HZsLiEg3VrTBFGzQscFt5LtUPH/VC1FJpwEo0lHQhBwuNExx9yTJReDioU2btQJF1SkhHQwBUdZdOGgZWvBuKfgiV0EgQ9UBE+k29Q1DTaNLyYgfjkVGFE+QuJpPQ4E1XfF4TETg2J1J0BvGzX4xu6RK2Zi3K/K5IGoJaronzUvNYv/EDSfo/GFdWDUPnaWp2OIfCajLvXB5oalfxfCI+S7wCHQm7F1tMFt6QZFExdUjuaEtMp/T7LuMggwxdPBjjLpbYDAZm8EaMIa4tZaShkSTCT+Wh5PENR2TzA1QoS/oPWZj6nGmXhgAAEXQs4=
    - secure: nKpvRC7lzoHmVZkLX4qnfK4FqeeNMgtnNeBCLpNgQCzd822raxsIEZ5WMIBt7/cjVeFkcM2hZMV4WMbPdL5+hIaTr3hXWoYdN2zKxfAb3sJAIM7ODm0j2hE78glz144gMjqGnvJJwFf8/wsEBDW/RF/HIQ5ofNVWc4pxEuXXrEBQ7dFsNahUEXrHB7CSPiWOiA9RltQbMmYGgrgszSJPmKVe36FrSFJwz2pKduu+rPix98D9oXv/imVNrt4B1DQrzv7DYseMSTqqernyxXelr0CeUElFi7CTurt5XLBRFAATlGLrydCrYDVupBidqrjucDewj3n+KLwp0oATpgw+bxnSHGkyk2YBIrL4oWGSUUMI7x26Guld2EAowKG7wFg7egY9EfGYIetN5lCpPLvp5EwyMXKeZer17ZnXi2HUfBwFMTKCdfhTI4cmfqC/KHPFXKj+Ary+KAUQHybDPOMYgO0a70ZwHUveKFuWv+Ap+lBddt7T/ahpS8iyoIGpogohJcMhjl/1O/7da+b6kVrVFQ0J/v0m1ZI1ReqrHhVK9JBwVj3mZFOdVbZxVEkmcFUj2Qu9HaokPZfbQpX70//xNJ55NmwgdxTHplHG14HqAYsXJDxE0AbnJoZZgqv7RGbTCpHuFhit6VkiDnNcBhK6Xuq+DdfXO0NDAaj0E9dKYCE=
before_install:
  - nvm install
  - nvm use
install: skip
script: make
before_deploy: cd browser-plugin && npm run firefox-upload && npm run chrome-upload && npm run chrome-publish && cd ..
deploy:
  provider: releases
  skip_cleanup: true
  file_glob: true
  api_key:
    secure: ReEx1Fyk8Z/65H0B2cSp6rumxnpBUnZWNz4OSGWhwSYRQdxCwJByaURmmo6xIJn+kKbc58gRsA8YQ50ssYbkTozNWGKboz+tFV73G0KsrsxDtTKzKeS7h/GpJ6qo+4mjWmPpWPo5wkLj1vYjyKuStlRo7sXAluQvbQt3MCYx7NGGaONkyTASuR4Tx+atbs7NtPvBMtl3z4wa3tRS//x9OUX/kyHZkqEcffXIirple9q6VGErRly/VdY1W3VziHbaJG/Z6i9zZbTB6oWZe8GfKKFoiuq2szngnTToEeFn8oYHrV3/B26isVcGJdwfIfAnRrJXUZ7XOzXePR/xkFqfZMEPQfULQyKG+X6OGb/wOxjwGp/6mL3cKFZlUwqiGn9z3/A2BxwcxQgVkNWRsE5dTnZgThIksxVKaqFgL/6YC5uUZ/HnwGnYCT54eoqVnUsamPh7BMjncDZcIN+q3zZPU2EjDZ7CNoddg8bBV1ieiqdBpwD5D0EcCAwk7dib7CvBNTp2poB8j2wBIj1HY5TEuEppcXzJzOp3OGSpfx5UOgwQZkSkM/aY4U/g9RC/uVDmZfAyzSslKT6a6NlAhTdidEO/V2zKrLI+RTcJCpgXHxmoM06FVTjes0MPnaR6vmBR0LZ8lc4qO7MTTSlR35u6f7zmb3bIwF77qvTbxH/mlqs=
  file:
    - browser-plugin/build/package-unsigned.zip
    - browser-plugin/web-ext-artifacts/*.xpi
    - client/build/release.js
    - client/build/release.js.map
  draft: true
  on:
    tags: true
    repo: agiledigital/mule-preview
