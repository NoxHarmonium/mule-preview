!function(e){var t={};function o(n){if(t[n])return t[n].exports;var s=t[n]={i:n,l:!1,exports:{}};return e[n].call(s.exports,s,s.exports,o),s.l=!0,s.exports}o.m=e,o.c=t,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)o.d(n,s,function(t){return e[t]}.bind(null,s));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s=0)}([function(e,t,o){"use strict";function n(e,t,o){let s;return"#text"===e.nodeName?s=o.document.createTextNode(e.data):"#comment"===e.nodeName?s=o.document.createComment(e.data):("svg"===e.nodeName||t?(s=o.document.createElementNS("http://www.w3.org/2000/svg",e.nodeName),t=!0):s=o.document.createElement(e.nodeName),e.attributes&&Object.entries(e.attributes).forEach(([e,t])=>s.setAttribute(e,t)),e.childNodes&&e.childNodes.forEach(e=>s.appendChild(n(e,t,o))),o.valueDiffing&&(e.value&&(s.value=e.value),e.checked&&(s.checked=e.checked),e.selected&&(s.selected=e.selected))),s}function s(e,t){for(t=t.slice();t.length>0;){if(!e.childNodes)return!1;const o=t.splice(0,1)[0];e=e.childNodes[o]}return e}function i(e,t,o){let i,l,a,c,u,r=s(e,t[o._const.route]);const d={diff:t,node:r};if(o.preDiffApply(d))return!0;switch(t[o._const.action]){case o._const.addAttribute:if(!r||!r.setAttribute)return!1;r.setAttribute(t[o._const.name],t[o._const.value]);break;case o._const.modifyAttribute:if(!r||!r.setAttribute)return!1;r.setAttribute(t[o._const.name],t[o._const.newValue]),"INPUT"===r.nodeName&&"value"===t[o._const.name]&&(r.value=t[o._const.newValue]);break;case o._const.removeAttribute:if(!r||!r.removeAttribute)return!1;r.removeAttribute(t[o._const.name]);break;case o._const.modifyTextElement:if(!r||3!==r.nodeType)return!1;o.textDiff(r,r.data,t[o._const.oldValue],t[o._const.newValue]);break;case o._const.modifyValue:if(!r||void 0===r.value)return!1;r.value=t[o._const.newValue];break;case o._const.modifyComment:if(!r||void 0===r.data)return!1;o.textDiff(r,r.data,t[o._const.oldValue],t[o._const.newValue]);break;case o._const.modifyChecked:if(!r||void 0===r.checked)return!1;r.checked=t[o._const.newValue];break;case o._const.modifySelected:if(!r||void 0===r.selected)return!1;r.selected=t[o._const.newValue];break;case o._const.replaceElement:r.parentNode.replaceChild(n(t[o._const.newValue],"http://www.w3.org/2000/svg"===r.namespaceURI,o),r);break;case o._const.relocateGroup:(c=Array(...new Array(t.groupLength)).map(()=>r.removeChild(r.childNodes[t[o._const.from]]))).forEach((e,n)=>{0===n&&(l=r.childNodes[t[o._const.to]]),r.insertBefore(e,l||null)});break;case o._const.removeElement:r.parentNode.removeChild(r);break;case o._const.addElement:u=(a=t[o._const.route].slice()).splice(a.length-1,1)[0],(r=s(e,a)).insertBefore(n(t[o._const.element],"http://www.w3.org/2000/svg"===r.namespaceURI,o),r.childNodes[u]||null);break;case o._const.removeTextElement:if(!r||3!==r.nodeType)return!1;r.parentNode.removeChild(r);break;case o._const.addTextElement:if(u=(a=t[o._const.route].slice()).splice(a.length-1,1)[0],i=o.document.createTextNode(t[o._const.value]),!(r=s(e,a))||!r.childNodes)return!1;r.insertBefore(i,r.childNodes[u]||null);break;default:console.log("unknown action")}return d.newNode=i,o.postDiffApply(d),!0}function l(e,t,o){const n=e[t];e[t]=e[o],e[o]=n}function a(e,t,o){t.length||(t=[t]),(t=t.slice()).reverse(),t.forEach(t=>{!function(e,t,o){switch(t[o._const.action]){case o._const.addAttribute:t[o._const.action]=o._const.removeAttribute,i(e,t,o);break;case o._const.modifyAttribute:l(t,o._const.oldValue,o._const.newValue),i(e,t,o);break;case o._const.removeAttribute:t[o._const.action]=o._const.addAttribute,i(e,t,o);break;case o._const.modifyTextElement:case o._const.modifyValue:case o._const.modifyComment:case o._const.modifyChecked:case o._const.modifySelected:case o._const.replaceElement:l(t,o._const.oldValue,o._const.newValue),i(e,t,o);break;case o._const.relocateGroup:l(t,o._const.from,o._const.to),i(e,t,o);break;case o._const.removeElement:t[o._const.action]=o._const.addElement,i(e,t,o);break;case o._const.addElement:t[o._const.action]=o._const.removeElement,i(e,t,o);break;case o._const.removeTextElement:t[o._const.action]=o._const.addTextElement,i(e,t,o);break;case o._const.addTextElement:t[o._const.action]=o._const.removeTextElement,i(e,t,o);break;default:console.log("unknown action")}}(e,t,o)})}o.r(t);class c{constructor(e={}){Object.entries(e).forEach(([e,t])=>this[e]=t)}toString(){return JSON.stringify(this)}setValue(e,t){return this[e]=t,this}}function u(e){const t=[];return"#text"!==e.nodeName&&"#comment"!==e.nodeName&&(t.push(e.nodeName),e.attributes&&(e.attributes.class&&t.push(`${e.nodeName}.${e.attributes.class.replace(/ /g,".")}`),e.attributes.id&&t.push(`${e.nodeName}#${e.attributes.id}`))),t}function r(e){const t={},o={};return e.forEach(e=>{u(e).forEach(e=>{const n=e in t;n||e in o?n&&(delete t[e],o[e]=!0):t[e]=!0})}),t}function d(e,t){const o=r(e),n=r(t),s={};return Object.keys(o).forEach(e=>{n[e]&&(s[e]=!0)}),s}function h(e){return delete e.outerDone,delete e.innerDone,delete e.valueDone,!e.childNodes||e.childNodes.every(h)}function f(e,t){if(!["nodeName","value","checked","selected","data"].every(o=>e[o]===t[o]))return!1;if(Boolean(e.attributes)!==Boolean(t.attributes))return!1;if(Boolean(e.childNodes)!==Boolean(t.childNodes))return!1;if(e.attributes){const o=Object.keys(e.attributes),n=Object.keys(t.attributes);if(o.length!==n.length)return!1;if(!o.every(o=>e.attributes[o]===t.attributes[o]))return!1}if(e.childNodes){if(e.childNodes.length!==t.childNodes.length)return!1;if(!e.childNodes.every((e,o)=>f(e,t.childNodes[o])))return!1}return!0}function p(e,t,o,n,s){if(!e||!t)return!1;if(e.nodeName!==t.nodeName)return!1;if("#text"===e.nodeName)return!!s||e.data===t.data;if(e.nodeName in o)return!0;if(e.attributes&&t.attributes){if(e.attributes.id){if(e.attributes.id!==t.attributes.id)return!1;if(`${e.nodeName}#${e.attributes.id}`in o)return!0}if(e.attributes.class&&e.attributes.class===t.attributes.class){if(`${e.nodeName}.${e.attributes.class.replace(/ /g,".")}`in o)return!0}}if(n)return!0;const i=e.childNodes?e.childNodes.slice().reverse():[],l=t.childNodes?t.childNodes.slice().reverse():[];if(i.length!==l.length)return!1;if(s)return i.every((e,t)=>e.nodeName===l[t].nodeName);{const e=d(i,l);return i.every((t,o)=>p(t,l[o],e,!0,!0))}}function m(e){return JSON.parse(JSON.stringify(e))}function _(e,t,o,n){let s=0,i=[];const l=e.length,a=t.length,c=Array(...new Array(l+1)).map(()=>[]),r=d(e,t);let h=l===a;h&&e.some((e,o)=>{const n=u(e),s=u(t[o]);return n.length!==s.length?(h=!1,!0):(n.some((e,t)=>{if(e!==s[t])return h=!1,!0}),!h||void 0)});for(let u=0;u<l;u++){const l=e[u];for(let e=0;e<a;e++){const a=t[e];o[u]||n[e]||!p(l,a,r,h)?c[u+1][e+1]=0:(c[u+1][e+1]=c[u][e]?c[u][e]+1:1,c[u+1][e+1]>=s&&(s=c[u+1][e+1],i=[u+1,e+1]))}}return 0!==s&&{oldValue:i[0]-s,newValue:i[1]-s,length:s}}function V(e,t){return Array(...new Array(e)).map(()=>t)}class g{constructor(){this.list=[]}add(e){this.list.push(...e)}forEach(e){this.list.forEach(t=>e(t))}}function b(e,t){let o,n,s=e;for(t=t.slice();t.length>0;){if(!s.childNodes)return!1;n=t.splice(0,1)[0],o=s,s=s.childNodes[n]}return{node:s,parentNode:o,nodeIndex:n}}function N(e,t,o){return t.forEach(t=>{!function(e,t,o){const n=b(e,t[o._const.route]);let s=n.node;const i=n.parentNode,l=n.nodeIndex,a=[],c={diff:t,node:s};if(o.preDiffApply(c))return!0;let u,r,d,h;switch(t[o._const.action]){case o._const.addAttribute:s.attributes||(s.attributes={}),s.attributes[t[o._const.name]]=t[o._const.value],"checked"===t[o._const.name]?s.checked=!0:"selected"===t[o._const.name]?s.selected=!0:"INPUT"===s.nodeName&&"value"===t[o._const.name]&&(s.value=t[o._const.value]);break;case o._const.modifyAttribute:s.attributes[t[o._const.name]]=t[o._const.newValue];break;case o._const.removeAttribute:delete s.attributes[t[o._const.name]],0===Object.keys(s.attributes).length&&delete s.attributes,"checked"===t[o._const.name]?s.checked=!1:"selected"===t[o._const.name]?delete s.selected:"INPUT"===s.nodeName&&"value"===t[o._const.name]&&delete s.value;break;case o._const.modifyTextElement:s.data=t[o._const.newValue];break;case o._const.modifyValue:s.value=t[o._const.newValue];break;case o._const.modifyComment:s.data=t[o._const.newValue];break;case o._const.modifyChecked:s.checked=t[o._const.newValue];break;case o._const.modifySelected:s.selected=t[o._const.newValue];break;case o._const.replaceElement:(u=m(t[o._const.newValue])).outerDone=!0,u.innerDone=!0,u.valueDone=!0,i.childNodes[l]=u;break;case o._const.relocateGroup:(r=s.childNodes.splice(t[o._const.from],t.groupLength).reverse()).forEach(e=>s.childNodes.splice(t[o._const.to],0,e)),s.subsets&&s.subsets.forEach(e=>{if(t[o._const.from]<t[o._const.to]&&e.oldValue<=t[o._const.to]&&e.oldValue>t[o._const.from]){e.oldValue-=t.groupLength;const n=e.oldValue+e.length-t[o._const.to];n>0&&(a.push({oldValue:t[o._const.to]+t.groupLength,newValue:e.newValue+e.length-n,length:n}),e.length-=n)}else if(t[o._const.from]>t[o._const.to]&&e.oldValue>t[o._const.to]&&e.oldValue<t[o._const.from]){e.oldValue+=t.groupLength;const n=e.oldValue+e.length-t[o._const.to];n>0&&(a.push({oldValue:t[o._const.to]+t.groupLength,newValue:e.newValue+e.length-n,length:n}),e.length-=n)}else e.oldValue===t[o._const.from]&&(e.oldValue=t[o._const.to])});break;case o._const.removeElement:i.childNodes.splice(l,1),i.subsets&&i.subsets.forEach(e=>{e.oldValue>l?e.oldValue-=1:e.oldValue===l?e.delete=!0:e.oldValue<l&&e.oldValue+e.length>l&&(e.oldValue+e.length-1===l?e.length--:(a.push({newValue:e.newValue+l-e.oldValue,oldValue:l,length:e.length-l+e.oldValue-1}),e.length=l-e.oldValue))}),s=i;break;case o._const.addElement:d=t[o._const.route].slice(),h=d.splice(d.length-1,1)[0],s=b(e,d).node,(u=m(t[o._const.element])).outerDone=!0,u.innerDone=!0,u.valueDone=!0,s.childNodes||(s.childNodes=[]),h>=s.childNodes.length?s.childNodes.push(u):s.childNodes.splice(h,0,u),s.subsets&&s.subsets.forEach(e=>{if(e.oldValue>=h)e.oldValue+=1;else if(e.oldValue<h&&e.oldValue+e.length>h){const t=e.oldValue+e.length-h;a.push({newValue:e.newValue+e.length-t,oldValue:h+1,length:t}),e.length-=t}});break;case o._const.removeTextElement:i.childNodes.splice(l,1),"TEXTAREA"===i.nodeName&&delete i.value,i.subsets&&i.subsets.forEach(e=>{e.oldValue>l?e.oldValue-=1:e.oldValue===l?e.delete=!0:e.oldValue<l&&e.oldValue+e.length>l&&(e.oldValue+e.length-1===l?e.length--:(a.push({newValue:e.newValue+l-e.oldValue,oldValue:l,length:e.length-l+e.oldValue-1}),e.length=l-e.oldValue))}),s=i;break;case o._const.addTextElement:d=t[o._const.route].slice(),h=d.splice(d.length-1,1)[0],(u={}).nodeName="#text",u.data=t[o._const.value],(s=b(e,d).node).childNodes||(s.childNodes=[]),h>=s.childNodes.length?s.childNodes.push(u):s.childNodes.splice(h,0,u),"TEXTAREA"===s.nodeName&&(s.value=t[o._const.newValue]),s.subsets&&s.subsets.forEach(e=>{if(e.oldValue>=h&&(e.oldValue+=1),e.oldValue<h&&e.oldValue+e.length>h){const t=e.oldValue+e.length-h;a.push({newValue:e.newValue+e.length-t,oldValue:h+1,length:t}),e.length-=t}});break;default:console.log("unknown action")}s.subsets&&(s.subsets=s.subsets.filter(e=>!e.delete&&e.oldValue!==e.newValue),a.length&&(s.subsets=s.subsets.concat(a))),c.newNode=u,o.postDiffApply(c)}(e,t,o)}),!0}function w(e,t={}){const o={};if(o.nodeName=e.nodeName,"#text"===o.nodeName||"#comment"===o.nodeName)o.data=e.data;else{if(e.attributes&&e.attributes.length>0){o.attributes={},Array.prototype.slice.call(e.attributes).forEach(e=>o.attributes[e.name]=e.value)}if("TEXTAREA"===o.nodeName)o.value=e.value;else if(e.childNodes&&e.childNodes.length>0){o.childNodes=[],Array.prototype.slice.call(e.childNodes).forEach(e=>o.childNodes.push(w(e,t)))}t.valueDiffing&&(void 0!==e.checked&&e.type&&["radio","checkbox"].includes(e.type.toLowerCase())?o.checked=e.checked:void 0!==e.value&&(o.value=e.value),void 0!==e.selected&&(o.selected=e.selected))}return o}const v=/<(?:"[^"]*"['"]*|'[^']*'['"]*|[^'">])+>/g,y=Object.create?Object.create(null):{},E=/([\w-:]+)|(['"])([^'"]*)\2/g,k={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,menuItem:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0};function x(e,t={components:y}){const o=[];let n,s=-1;const i=[],l={};let a=!1;return e.replace(v,(c,u)=>{if(a){if(c!==`</${n.nodeName}>`)return;a=!1}const r="/"!==c.charAt(1),d=u+c.length,h=e.charAt(d);let f;if(r&&(s++,"tag"===(n=function(e){let t,o=0;const n={nodeName:""};return e.replace(E,s=>{o%2?t=s:0===o?((k[s]||"/"===e.charAt(e.length-2))&&(n.voidElement=!0),n.nodeName=s.toUpperCase()):(n.attributes||(n.attributes={}),n.attributes[t]=s.replace(/^['"]|['"]$/g,"")),o++}),n}(c)).type&&t.components[n.nodeName]&&(n.type="component",a=!0),n.voidElement||a||!h||"<"===h||(n.childNodes||(n.childNodes=[]),n.childNodes.push({nodeName:"#text",data:e.slice(d,e.indexOf("<",d))})),l[n.tagName]=n,0===s&&o.push(n),(f=i[s-1])&&(f.childNodes||(f.childNodes=[]),f.childNodes.push(n)),i[s]=n),(!r||n.voidElement)&&(s--,!a&&"<"!==h&&h)){f=-1===s?o:i[s].childNodes||[];const t=e.indexOf("<",d),n=e.slice(d,-1===t?void 0:t);f.push({nodeName:"#text",data:n})}}),o[0]}function A(e){return function e(t){return delete t.voidElement,t.childNodes&&t.childNodes.forEach(t=>e(t)),t}(x(e))}class D{constructor(e,t,o){this.options=o,this.t1=e instanceof HTMLElement?w(e,this.options):"string"==typeof e?A(e,this.options):JSON.parse(JSON.stringify(e)),this.t2=t instanceof HTMLElement?w(t,this.options):"string"==typeof t?A(t,this.options):JSON.parse(JSON.stringify(t)),this.diffcount=0,this.foundAll=!1,this.debug&&(this.t1Orig=w(e,this.options),this.t2Orig=w(t,this.options)),this.tracker=new g}init(){return this.findDiffs(this.t1,this.t2)}findDiffs(e,t){let o;do{if(this.options.debug&&(this.diffcount+=1,this.diffcount>this.options.diffcap))throw window.diffError=[this.t1Orig,this.t2Orig],new Error(`surpassed diffcap:${JSON.stringify(this.t1Orig)} -> ${JSON.stringify(this.t2Orig)}`);0===(o=this.findNextDiff(e,t,[])).length&&(f(e,t)||(this.foundAll?console.error("Could not find remaining diffs!"):(this.foundAll=!0,h(e),o=this.findNextDiff(e,t,[])))),o.length>0&&(this.foundAll=!1,this.tracker.add(o),N(e,o,this.options))}while(o.length>0);return this.tracker.list}findNextDiff(e,t,o){let n,s;if(this.options.maxDepth&&o.length>this.options.maxDepth)return[];if(!e.outerDone){if(n=this.findOuterDiff(e,t,o),this.options.filterOuterDiff&&(s=this.options.filterOuterDiff(e,t,n))&&(n=s),n.length>0)return e.outerDone=!0,n;e.outerDone=!0}if(!e.innerDone){if((n=this.findInnerDiff(e,t,o)).length>0)return n;e.innerDone=!0}if(this.options.valueDiffing&&!e.valueDone){if((n=this.findValueDiff(e,t,o)).length>0)return e.valueDone=!0,n;e.valueDone=!0}return[]}findOuterDiff(e,t,o){const n=[];let s,i,l,a,u,r;if(e.nodeName!==t.nodeName){if(!o.length)throw new Error("Top level nodes have to be of the same kind.");return[(new c).setValue(this.options._const.action,this.options._const.replaceElement).setValue(this.options._const.oldValue,m(e)).setValue(this.options._const.newValue,m(t)).setValue(this.options._const.route,o)]}if(o.length&&this.options.maxNodeDiffCount<Math.abs((e.childNodes||[]).length-(t.childNodes||[]).length))return[(new c).setValue(this.options._const.action,this.options._const.replaceElement).setValue(this.options._const.oldValue,m(e)).setValue(this.options._const.newValue,m(t)).setValue(this.options._const.route,o)];if(e.data!==t.data)return"#text"===e.nodeName?[(new c).setValue(this.options._const.action,this.options._const.modifyTextElement).setValue(this.options._const.route,o).setValue(this.options._const.oldValue,e.data).setValue(this.options._const.newValue,t.data)]:[(new c).setValue(this.options._const.action,this.options._const.modifyComment).setValue(this.options._const.route,o).setValue(this.options._const.oldValue,e.data).setValue(this.options._const.newValue,t.data)];for(i=e.attributes?Object.keys(e.attributes).sort():[],l=t.attributes?Object.keys(t.attributes).sort():[],a=i.length,r=0;r<a;r++)s=i[r],-1===(u=l.indexOf(s))?n.push((new c).setValue(this.options._const.action,this.options._const.removeAttribute).setValue(this.options._const.route,o).setValue(this.options._const.name,s).setValue(this.options._const.value,e.attributes[s])):(l.splice(u,1),e.attributes[s]!==t.attributes[s]&&n.push((new c).setValue(this.options._const.action,this.options._const.modifyAttribute).setValue(this.options._const.route,o).setValue(this.options._const.name,s).setValue(this.options._const.oldValue,e.attributes[s]).setValue(this.options._const.newValue,t.attributes[s])));for(a=l.length,r=0;r<a;r++)s=l[r],n.push((new c).setValue(this.options._const.action,this.options._const.addAttribute).setValue(this.options._const.route,o).setValue(this.options._const.name,s).setValue(this.options._const.value,t.attributes[s]));return n}findInnerDiff(e,t,o){const n=e.childNodes?e.childNodes.slice():[],s=t.childNodes?t.childNodes.slice():[],i=Math.max(n.length,s.length);let l=Math.abs(n.length-s.length),a=[],u=0;if(!this.options.maxChildCount||i<this.options.maxChildCount){const n=e.subsets&&e.subsetsAge--?e.subsets:e.childNodes&&t.childNodes?function(e,t){const o=e.childNodes?e.childNodes:[],n=t.childNodes?t.childNodes:[],s=V(o.length,!1),i=V(n.length,!1),l=[];let a=!0;const c=function(){return arguments[1]},u=e=>{s[a.oldValue+e]=!0,i[a.newValue+e]=!0};for(;a;)(a=_(o,n,s,i))&&(l.push(a),Array(...new Array(a.length)).map(c).forEach(e=>u(e)));return e.subsets=l,e.subsetsAge=100,l}(e,t):[];if(n.length>0&&(a=this.attemptGroupRelocation(e,t,n,o)).length>0)return a}for(let e=0;e<i;e+=1){const t=n[e],r=s[e];l&&(t&&!r?"#text"===t.nodeName?(a.push((new c).setValue(this.options._const.action,this.options._const.removeTextElement).setValue(this.options._const.route,o.concat(u)).setValue(this.options._const.value,t.data)),u-=1):(a.push((new c).setValue(this.options._const.action,this.options._const.removeElement).setValue(this.options._const.route,o.concat(u)).setValue(this.options._const.element,m(t))),u-=1):r&&!t&&("#text"===r.nodeName?a.push((new c).setValue(this.options._const.action,this.options._const.addTextElement).setValue(this.options._const.route,o.concat(u)).setValue(this.options._const.value,r.data)):a.push((new c).setValue(this.options._const.action,this.options._const.addElement).setValue(this.options._const.route,o.concat(u)).setValue(this.options._const.element,m(r))))),t&&r&&(!this.options.maxChildCount||i<this.options.maxChildCount?a=a.concat(this.findNextDiff(t,r,o.concat(u))):f(t,r)||(n.length>s.length?(a=a.concat([(new c).setValue(this.options._const.action,this.options._const.removeElement).setValue(this.options._const.element,m(t)).setValue(this.options._const.route,o.concat(u))]),n.splice(e,1),u-=1,l-=1):n.length<s.length?(a=a.concat([(new c).setValue(this.options._const.action,this.options._const.addElement).setValue(this.options._const.element,m(r)).setValue(this.options._const.route,o.concat(u))]),n.splice(e,0,{}),l-=1):a=a.concat([(new c).setValue(this.options._const.action,this.options._const.replaceElement).setValue(this.options._const.oldValue,m(t)).setValue(this.options._const.newValue,m(r)).setValue(this.options._const.route,o.concat(u))]))),u+=1}return e.innerDone=!0,a}attemptGroupRelocation(e,t,o,n){const s=function(e,t,o){const n=e.childNodes?V(e.childNodes.length,!0):[],s=t.childNodes?V(t.childNodes.length,!0):[];let i=0;return o.forEach(e=>{const t=e.oldValue+e.length,o=e.newValue+e.length;for(let o=e.oldValue;o<t;o+=1)n[o]=i;for(let t=e.newValue;t<o;t+=1)s[t]=i;i+=1}),{gaps1:n,gaps2:s}}(e,t,o),i=s.gaps1,l=s.gaps2;let a,u,r,d,h,f,_=Math.min(i.length,l.length);const g=[];for(let s=0,V=0;s<_;V+=1,s+=1)if(!0===i[s])if("#text"===(d=e.childNodes[V]).nodeName){if("#text"===t.childNodes[s].nodeName&&d.data!==t.childNodes[s].data){for(f=V;e.childNodes.length>f+1&&"#text"===e.childNodes[f+1].nodeName;)if(f+=1,t.childNodes[s].data===e.childNodes[f].data){h=!0;break}if(!h)return g.push((new c).setValue(this.options._const.action,this.options._const.modifyTextElement).setValue(this.options._const.route,n.concat(s)).setValue(this.options._const.oldValue,d.data).setValue(this.options._const.newValue,t.childNodes[s].data)),g}g.push((new c).setValue(this.options._const.action,this.options._const.removeTextElement).setValue(this.options._const.route,n.concat(s)).setValue(this.options._const.value,d.data)),i.splice(s,1),_=Math.min(i.length,l.length),s-=1}else g.push((new c).setValue(this.options._const.action,this.options._const.removeElement).setValue(this.options._const.route,n.concat(s)).setValue(this.options._const.element,m(d))),i.splice(s,1),_=Math.min(i.length,l.length),s-=1;else if(!0===l[s])"#text"===(d=t.childNodes[s]).nodeName?(g.push((new c).setValue(this.options._const.action,this.options._const.addTextElement).setValue(this.options._const.route,n.concat(s)).setValue(this.options._const.value,d.data)),i.splice(s,0,!0),_=Math.min(i.length,l.length),V-=1):(g.push((new c).setValue(this.options._const.action,this.options._const.addElement).setValue(this.options._const.route,n.concat(s)).setValue(this.options._const.element,m(d))),i.splice(s,0,!0),_=Math.min(i.length,l.length),V-=1);else if(i[s]!==l[s]){if(g.length>0)return g;if(r=o[i[s]],(u=Math.min(r.newValue,e.childNodes.length-r.length))!==r.oldValue){a=!1;for(let t=0;t<r.length;t+=1)p(e.childNodes[u+t],e.childNodes[r.oldValue+t],[],!1,!0)||(a=!0);if(a)return[(new c).setValue(this.options._const.action,this.options._const.relocateGroup).setValue("groupLength",r.length).setValue(this.options._const.from,r.oldValue).setValue(this.options._const.to,u).setValue(this.options._const.route,n)]}}return g}findValueDiff(e,t,o){const n=[];return e.selected!==t.selected&&n.push((new c).setValue(this.options._const.action,this.options._const.modifySelected).setValue(this.options._const.oldValue,e.selected).setValue(this.options._const.newValue,t.selected).setValue(this.options._const.route,o)),(e.value||t.value)&&e.value!==t.value&&"OPTION"!==e.nodeName&&n.push((new c).setValue(this.options._const.action,this.options._const.modifyValue).setValue(this.options._const.oldValue,e.value||"").setValue(this.options._const.newValue,t.value||"").setValue(this.options._const.route,o)),e.checked!==t.checked&&n.push((new c).setValue(this.options._const.action,this.options._const.modifyChecked).setValue(this.options._const.oldValue,e.checked).setValue(this.options._const.newValue,t.checked).setValue(this.options._const.route,o)),n}}const O={debug:!1,diffcap:10,maxDepth:!1,maxChildCount:50,valueDiffing:!0,textDiff(e,t,o,n){e.data=n},preVirtualDiffApply(){},postVirtualDiffApply(){},preDiffApply(){},postDiffApply(){},filterOuterDiff:null,compress:!1,_const:!1,document:!(!window||!window.document)&&window.document};window.DiffDOM=class{constructor(e={}){if(this.options=e,Object.entries(O).forEach(([e,t])=>{Object.prototype.hasOwnProperty.call(this.options,e)||(this.options[e]=t)}),!this.options._const){const e=["addAttribute","modifyAttribute","removeAttribute","modifyTextElement","relocateGroup","removeElement","addElement","removeTextElement","addTextElement","replaceElement","modifyValue","modifyChecked","modifySelected","modifyComment","action","route","oldValue","newValue","element","group","from","to","name","value","data","attributes","nodeName","childNodes","checked","selected"];this.options._const={},this.options.compress?e.forEach((e,t)=>this.options._const[e]=t):e.forEach(e=>this.options._const[e]=e)}this.DiffFinder=D}apply(e,t){return function(e,t,o){return t.every(t=>i(e,t,o))}(e,t,this.options)}undo(e,t){return a(e,t,this.options)}diff(e,t){return new this.DiffFinder(e,t,this.options).init()}}}]);